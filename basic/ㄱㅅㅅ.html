
<!DOCTYPE html>
<html lang="en">
<head>
    <base href="https://www.shinhancard.com/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/pconts/js/externalLib.css.js?ver=031309"></script>
    <script src="/pconts/js/shinhancard.css.js?ver=031309"></script>
    <script src="/pconts/js/externalLib.js?ver=031309"></script>
    <script src="/pconts/js/shinhancard.ui.js?ver=031309"></script>
    <!-- <script src="/logic/js/mob/cmm/pesn-common.js?ver=031309"></script>
	<link rel="stylesheet" href="/pconts/css/shcard/shc-main.css?ver=031309" media="all"> 
	<script src="/pconts/js/main_news.js?ver=031309"></script> -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" /> -->
</head>
<body>
    <style>
        :focus {border:2px solid red}
        ul {list-style: none;}
        * {padding:0; margin:0}
        .wrap {width:1080px; height: 500px; position:relative; margin:0 auto; overflow: hidden; background-color: navy;}
        .scroll {width: 100%;  overflow: auto; scroll-behavior: smooth; touch-action: pan-x; cursor:grabbing}
        .slider {display: flex; 
            position: relative; cursor: grab;
            /* transition: transform 0.3s ease; */
        /* cursor: grab;
        cursor: -webkit-grab;
        position: absolute;
        top: 0;
        left: 0;
        transition: transform 0.3s ease;  
        display: flex;
        align-items: end; */
        }
        .slider > li {width: 1080px; height: 500px; flex: 0 0 auto; }
        .slider > li:nth-child(1) {background-color: blue;}
        .slider > li:nth-child(2) {background-color: olive}
        .slider > li:nth-child(3) {background-color: darkmagenta}
        .cards {position: relative; width: 100%; height: 100%;}
        .cards button {width: 100%; height: 100%; background: none;}
        .cards-item {position:absolute; width:150px; height:150px; background:orange;}
        .cards-item.i1 {top:10%;left:10%}
        .cards-item.i2 {top:45%;left:40%}
        .cards-item.i3 {top:17%;right:-5%}
        .cards-item.i4 {top:30%;left:5%}
        .cards-item.i5 {top:10%;left:35%}
        .cards-item.i6 {top:60%;right: 4%}
        .cards-item.i7 {top:30%;left:-3%}
        .cards-item.i8 {top:70%;left:30%}
        .cards-item.i9 {top:10%;left:60%}
        .cards-item.i10 {top:50%;right:0}  
        @media screen and (max-width:1100px) {
            .wrap {width: 100vw;}
            .slider > li {width: 100vw;}
        }

    .swiper {
      width: 100%;
      padding-top: 50px;
      padding-bottom: 50px;
    }

    .swiper-slide {
      background-position: center;
      background-size: cover;
      width: 210px;
      height: 332px;
      transition: all 0.3s ease !important;
    }

    .swiper-slide img {
      display: block;
      width: 100%;
    }
    /* .swiper-slide.swiper-slide-active {
    transform: scale(1.5);
    background: #fc0;
    } */
    .pop_wrap .re-character {width: 520px !important;}
    .re-character .pop_cont {padding:0 !important}
    .cardInfo > div {display: none;}
    .show {display: block !important;}
    .swiper-container {padding-top:30px}
    </style>
    <div id="wrap">
        <header id="header"></header>
        <div id="container">
            <div class="wrap">
                <div class="scroll">
                   
                    <ul class="slider" style="transform: translateX(0);">
                        <li>
                            <ul class="cards">
                                <li class="cards-item i1"><button onclick="popOpen('#popCharacterCard',this)" class="startCharacterCard">1</button></li>
                                <li class="cards-item i2"><button onclick="test()" class="startCharacterCard">2</button></li>
                                <li class="cards-item i3"><button>3</button></li>
                            </ul>
                        </li>
                        <li>
                            <ul class="cards">
                                <li class="cards-item i4"><button>4</button></li>
                                <li class="cards-item i5"><button>5</button></li>
                                <li class="cards-item i6"><button>6</button></li>
                            </ul>                    
                        </li>
                        <li>
                            <ul class="cards">
                                <li class="cards-item i7"><button>7</button></li>
                                <li class="cards-item i8"><button>8</button></li>
                                <li class="cards-item i9"><button>9</button></li>
                                <li class="cards-item i10"><button>10</button></li>
                            </ul>                     
                        </li>
                    </ul>
                    <div style="color:#fff; margin-top:50px; z-index: 1; position:absolute; z-index: 1; top: 0;">
                        <button class="btn-prev" style="display: none;">이전</button>
                        <button class="btn-next">다음</button>
                    </div>                     
                </div>
            </div>
        </div>
        <div id="popCharacterCard" class="pop_wrap medium re-character auto_h" role="dialog" aria-modal="false" aria-labelledby="필터선택">
            <article class="popup popup_type01 re-character" role="dialog" aria-modal="false" id="gg">
                <div class="pop_head">
                    <h3>유형 선택</h3>
                </div>
                <div class="pop_cont">
                    <!-- Swiper -->
                    <div id="chCard-slide">

                      <div class="swiper-container">
                         
                          <div class="swiper-wrapper">
                              <!-- 슬라이드 내용 -->
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                              <div class="swiper-slide"><div class="hh"><a href="#"><img src="http://formygravity.dothome.co.kr/cdCreditAUAARH.png"/></a></div></div>
                          </div>
                          <!-- If we need pagination -->
                          <div class="swiper-pagination"></div>
              
                          <!-- If we need navigation buttons -->
                          <div class="swiper-button-prev"></div>
                          <div class="swiper-button-next"></div> 
                          <div class="cardInfo">
              
                          </div>
                        <!-- <div class="cardInfo">
                            <div>111</div>
                            <div>222</div>
                            <div>333</div>
                            <div>444</div>
                            <div>555</div>
                            <div>666</div>
                            <div>777</div>
                            <div>888</div>
                            <div>999</div>
                        </div>                           -->
                          <div class="align-c btn-go">
                              <a href="http://www.naver.com" class="btn default blue" id="btnViewDetail">바로가기2</a>
                          </div>
                      </div>
                  </div>         
                </div>
                <button type="button" class="btn_close ui-pop-close" data-bind-click="close()"><span>팝업닫기</span></button>
            </article> 
        </div>        
        <footer id="footer"></footer>
    </div>

  
    <script>
    var prevBtn = document.querySelector('.btn-prev');
    var nextBtn = document.querySelector('.btn-next');
    var currentPosition = 0;


    // 요소 & 사이즈
    var list = document.querySelector('.slider');
    var container = document.querySelector('.wrap');
    var listScrollWidth = list.scrollWidth;
    var listClientWidth = list.clientWidth;
    // 이벤트마다 갱신될 값
    let startX = 0;
    let nowX = 0;
    let endX = 0;
    let listX = 0;

    var currentTranslate = 0;
    var maxWidth = list.offsetWidth - container.offsetWidth;
    
    var getClientX = function(e){
        var isTouches = e.touches ? true : false;

        if(isTouches){
        e.touches[0].clientX
        }
        else {
        return e.clientX;
        }
        //
    // isTouches ? e.touches[0].clientX : e.clientX;
    };
    
    
    var getTranslateX = function(e){
        return parseInt(getComputedStyle(list).transform.split(/[^\-0-9]+/g)[5]);
    };
    
    var setTranslateX = function(x){
        list.style.transform = "translateX(" + x + "px)";
    };
    
    var onScrollStart = function(e){
        listX = getTranslateX();
        startX = getClientX(e);
        window.addEventListener('mousemove', onScrollMove);
        window.addEventListener('touchmove', onScrollMove);
        window.addEventListener('mouseup', onScrollEnd);
        window.addEventListener('touchend', onScrollEnd);
    };
    var onScrollMove = function(e){
        nowX = getClientX(e);
        setTranslateX(listX + nowX - startX);
        prevBtn.style.display = "inline-block"
        nextBtn.style.display = "inline-block"


    };
    var onScrollEnd = function(e){
        endX = getClientX(e);
        listX = getTranslateX();

        if (listX > 0) {
        setTranslateX(0);
        list.style.transition = "all 0.3s ease";
        listX = 0;
            prevBtn.style.display = "none"
            nextBtn.style.display = "inline-block"
        } else if (listX < listClientWidth - listScrollWidth) {
        setTranslateX(listClientWidth - listScrollWidth);
        list.style.transition = "all 0.3s ease";
        listX = listClientWidth - listScrollWidth;
            nextBtn.style.display = "none"        
        }


        window.removeEventListener('mousedown', onScrollStart);
        window.removeEventListener('touchstart', onScrollStart);
        window.removeEventListener('mousemove', onScrollMove);
        window.removeEventListener('touchmove', onScrollMove);
        window.removeEventListener('mouseup', onScrollEnd);
        window.removeEventListener('touchend', onScrollEnd);
        window.removeEventListener('click', onClick);
           
        setTimeout(function(){
        bindEvents();
        list.style.transition = '';
        }, 300);
      
    };
    var onClick = function(e){
        if (startX - endX !== 0) {
        e.preventDefault();
        }
    };
    
    var bindEvents = function(){
        list.addEventListener('mousedown', onScrollStart);
        list.addEventListener('touchstart', onScrollStart);
        list.addEventListener('click', onClick);
        
    };
    bindEvents();


    //앞뒤로 가기 버튼
    var maxWidth = list.offsetWidth*3 - container.offsetWidth;
    nextBtn.addEventListener('click', function(e){
        console.log(this)
        listX = getTranslateX();
        var newTraslate = listX - 300;

        if (newTraslate <= -maxWidth) {
            var newLocation = -maxWidth;
            this.style.display = 'none'
        } else {
            var newLocation = newTraslate;
            prevBtn.style.display = "inline-block"
        }    

        list.style.transition = "all 0.3s ease";
        list.style.transform = "translateX(" + newLocation + "px)";
    }) 
       

    prevBtn.addEventListener('click', function(e){
        var _this = this;
        listX = getTranslateX();
        var newTranslate = listX + 300;
        if (newTranslate >= 0) {
            newLocation = 0;
            this.style.display = 'none'
        } else {
            newLocation = newTranslate;
            nextBtn.style.display = "inline-block"
        }        
        list.style.transition = "all 0.3s ease";
        list.style.transform = "translateX(" + newLocation + "px)";
    })  




    </script>   
    

<script>
var arr = ['11신한카드 플리<br>(산리오캐릭터즈)','22신한카드 플리<br>(산리오캐릭터즈)','33신한카드 플리<br>(산리오캐릭터즈)','44신한카드 플리<br>(산리오캐릭터즈)', '55신한카드 플리<br>(산리오캐릭터즈)', '66신한카드 플리<br>(산리오캐릭터즈)', '77신한카드 플리<br>(산리오캐릭터즈)', '88신한카드 플리<br>(산리오캐릭터즈)8', '99신한카드 플리<br>(산리오캐릭터즈)']
var arr2 = ['http://www.naver1.com','http://www.naver2.com','http://www.naver3.com','http://www.naver4.com','http://www.naver5.com','http://www.naver6.com','http://www.naver7.com','http://www.naver8.com','http://www.naver9.com'];

//배열을 html로 만들어서 넣기 
function createDivWithText(text) {
var divElement = document.createElement('div');
divElement.innerHTML = text;
return divElement;
}

//형제 요소 찾기
function siblings(el) {
return  Array.prototype.filter.call(el.parentElement.children, function(e){ return e !== el;});
}

// 카드정보
var cardInfo = document.querySelector('.cardInfo');

// arr갯수만큼 div 생성하여 컨테이너에 추가
for (let i = 0; i <= arr.length; i++) {
cardInfo.appendChild(createDivWithText(arr[i]));
}     



function startCharacterCard() {
var swiper = new Swiper('.swiper-container', {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: 'auto',
    coverflowEffect: {
        rotate: 0,
        stretch: -25,
        depth: 100,
        modifier: 2,
        slideShadows: false,
    },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },      
        pagination: {
            el: '.swiper-pagination',
            type: 'bullets',
            clickable : true
        },    
        initialSlide : 1,       
        autoplay: false,
        watchSlidesVisibility: true,
        observeParents:true,
        observeSlideChidren:true,
        observer:true,          
        on: {
            init: function() {
                ui.swiperAccess($('#chCard-slide .swiper-continer'), 'auto');
                var slides = document.querySelectorAll('.swiper-slide')
                var slideActive = document.querySelector('.swiper-slide-active');
                var cardInfoDiv = document.querySelectorAll('.cardInfo > div'); 
                var btnViewDetail = document.getElementById('btnViewDetail');   
                cardInfoDiv[1].classList.add('show')
                //카드 위치 커스텀
                for(var i=0; i<slides.length; i++){
                    
                    slides[i].style.top = '20px' 
                    if(slides[i].classList.contains('swiper-slide-active')){
                        slides[i].style.transform = 'translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg)'
                        slides[i].style.top = '0px'  
                    }    
                        
                };                    
            },                
            slideChangeTransitionStart: function(){
                ui.swiperAccess($('#chCard-slide .swiper-continer'), 'auto');
                var slides = document.querySelectorAll('.swiper-slide')
                var cardInfoDiv = document.querySelectorAll('.cardInfo > div'); 
                //카드 위치 변경
                for(var i=0; i<slides.length; i++){
                    // slides[i].style.transition = `all 0.3s ease`
                    slides[i].style.top = '20px'   
                    if(slides[i].classList.contains('swiper-slide-active')){
                        slides[i].style.transform = 'translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg)'
                        slides[i].style.top = '0px'  
                    }        
                };
                //카드 정보 변경 & 버튼링크 변경
                for(var i=0; i<cardInfoDiv.length; i++){
                    if(slides[i].classList.contains('swiper-slide-active')){
                        cardInfoDiv[i].classList.add('show')
                        btnViewDetail.setAttribute('href',arr2[i]) 
                        var sbl = siblings(cardInfoDiv[i]);   
                        for(var i=0; i<sbl.length; i++){
                            sbl[i].classList.remove('show')
                        }   
                    }
                }                                      
            },
            transitionEnd: function(){
                ui.swiperAccess($('#chCard-slide .swiper-continer'), 'auto');
                var slides = document.querySelectorAll('.swiper-slide')
                var cardInfoDiv = document.querySelectorAll('.cardInfo > div'); 
                //카드 위치 변경
                for(var i=0; i<slides.length; i++){
                    // slides[i].style.transition = `all 0.3s ease`
                    slides[i].style.top = '20px'  
                    if(slides[i].classList.contains('swiper-slide-active')){
                        slides[i].style.transform = 'translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg)'
                        slides[i].style.top = '0px'    
                    }        
                };
                //카드 정보 변경 & 버튼링크 변경
                for(var i=0; i<cardInfoDiv.length; i++){
                    if(slides[i].classList.contains('swiper-slide-active')){
                        cardInfoDiv[i].classList.add('show')
                        btnViewDetail.setAttribute('href',arr2[i])
                        var sbl = siblings(cardInfoDiv[i]);   
                        // console.log(sbl)
                        for(var i=0; i<sbl.length; i++){
                            sbl[i].classList.remove('show')
                        }   
                    }
                }   
            },
            touchMove: function(){
                ui.swiperAccess($('#chCard-slide .swiper-continer'), 'auto');
                var slides = document.querySelectorAll('.swiper-slide')
                //카드 위치 변경
                for(var i=0; i<slides.length; i++){
                    slides[i].style.top = '20px'  
                    if(slides[i].classList.contains('swiper-slide-active')){
                        slides[i].style.transform = 'translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg)'
                        slides[i].style.top = '0px'  
                    }       
                };
            },
        }
    });  
}

//버튼 눌렀을때 스와이퍼 실행
$(function() {
$('.startCharacterCard').click(function() {
    startCharacterCard();
});



});

function test() {
    var mouseMoveStart = 마우스 클릭 시작점;
    vvar mouseMoveEnd = 마우스 클릭 끝점;

    if(마우스 클릭 시작점 === 마우스 클릭 끝점) {
        popOpen('#popCharacterCard',this)
    }
}
</script>


</body>
</html>