<!DOCTYPE html>
<html>
<head>
<style>
    * {margin:0;padding:0;}
    .scrolldown {width:100px;height:100px;background-color: #777;}
    .active {color:red;}
</style>
</head>
<body>
    <div style="height:1000px"></div>
    <div class="scrolldown" data-scrolldown="0.4">하단 기준 40% 위치에서 실행</div>
    <div style="height:500px"></div>
    <div class="scrolldown" data-scrolldown="100">하단 기준 100px 위치에서 실행</div>
    <div style="height:500px"></div>
    <div class="scrolldown" data-scrolldown>기본값 하단 기준 20% 위치에서 실행</div>

    

<div style="height:4000px"></div>
<script>

function scrolldown() {
    var scrolldownEle = document.querySelectorAll("[data-scrolldown]");
    scrolldownEle.forEach(function(item) {
        var elementRect = item.getBoundingClientRect();
        var viewportHeight = window.innerHeight || document.documentElement.clientHeight;
        var elementHeight = item.clientHeight;
        var scrollDown = item.dataset.scrolldown;
        var startPos = 0.2; // 기본값 viewportHeight 하단 기준 20%에서 시작
        var startLine = null; // 오브젝트가 보여지기 시작하는 위치

        if(scrollDown.length === 0) {
            startLine = viewportHeight *  (1 - startPos);
        } else {
            startPos = Number(scrollDown);
            startLine = scrollDown.indexOf('.') > -1 ? viewportHeight *  (1 - startPos) : viewportHeight - startPos // 소수점이면 백분율로 아니면 px로 계산
        }

        if (elementRect.top + elementHeight < startLine) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
}
// 스크롤 시
window.addEventListener("scroll", scrolldown);

// 로드 시
scrolldown();


</script>


<div data-values="1,2,3,4,5" class="data"></div>
<script>
var element = document.querySelector('.data');
var dataValues = element.getAttribute('data-values');
var valuesArray = dataValues.split(',').map(function(item) {
  return parseInt(item, 10); // 문자열을 정수로 변환
});

// console.log(valuesArray,valuesArray[0]); // [1, 2, 3, 4, 5]
</script>



</body>
</html>
